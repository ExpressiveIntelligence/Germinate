<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>NextGemini</title>
  <link href="https://fonts.googleapis.com/css?family=Caveat&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Bad+Script&display=swap" rel="stylesheet">
  <!-- |Caveat|Kavivanar|Long+Cang|Nothing+You+Could+Do|Reenie+Beanie -->
  <link rel="stylesheet" type="text/css" href="new.css">
  <script data-main="./js/main.js" src="./lib/require.js" defer></script>
</head>
<body>
  <div id="themePicker" class="modal">
    <div class="modal-contents">
      <h1>What's your game about?</h1>
      <button class="pick-theme">friendship</button>
      <button class="pick-theme">socializing</button>
      <button class="pick-theme">money</button>
      <button class="pick-theme">death</button>
      <button class="pick-theme">depression</button>
      <h2>Or enter your own theme:</h2>
      <input type="text" id="themePickerText" value="depression">
      <button class="continue" id="themePickerContinue">Continue »</button>
    </div>
  </div>
  <main>
    <div class="columns">
      <div class="intent" id="intentNode">
        <h2>Design intent</h2>
        <div class="buttonlinks">
          <span id="changeTheme">Change theme</span>
          •
          <span id="viewCodeIntent">View code</span>
          •
          <span id="toggleNegateMode" class="inactive">Enable negate mode</span>
        </div>
        <section class="code">
          <h3>Code</h3>
          <textarea>label(resource(r_1_XX_),r(1),private).

entity(e_1_XX_).

resource(r_1_XX_).

many(entity(e_1_XX_)).

initialize(set_value(resource(r_1_XX_),scalar(0))).
initialize(add(entity(e_1_XX_),scalar(1),location(middle,center))).
initialize(set_sprite(entity(e_1_XX_),smiley)).
initialize(set_color(entity(e_1_XX_),red)).
initialize(set_draggable(entity(e_1_XX_),true)).

controlLogic(draggable(entity(e_1_XX_))).

pool(entity(e_1_XX_),location(middle,center),ordered,ordered).

boundary(torus).

initialize(set_value(resource(r_1_XX_),scalar(0))).
initialize(set_value(resource(r_1_XX_),scalar(1))).

precondition(overlaps(entity(e_1_XX_),entity(e_1_XX_),true),outcome(o_1_XX_)).
result(outcome(o_1_XX_),mode_change(narrative_progress)).

precondition(control_event(button(mouse,pressed)),outcome(o_2_XX_)).
result(outcome(o_2_XX_),increase(resource(r_1_XX_),scalar(1))).

precondition(control_event(button(mouse,held)),outcome(o_3_XX_)).
result(outcome(o_3_XX_),increase_over_time(resource(r_1_XX_),scalar(1))).

precondition(ge(resource(r_1_XX_),scalar(9)),outcome(o_4_XX_)).
result(outcome(o_4_XX_),mode_change(game_loss)).

precondition(tick,tick).
result(tick,apply_restitution(entity(e_1_XX_),entity(e_1_XX_))).

reading(goal(reduce),resource(r_1_XX_)).</textarea>
        </section>
        <section class="entities">
          <h3>Entities</h3>
          <div id="intentEntitiesList" class="things-list">
            <div id="newEntityButton" class="thing entity new-button"
                 title="Add new entity">+</div>
          </div>
        </section>
        <section class="resources">
          <h3>Resources</h3>
          <div id="intentResourcesList" class="things-list">
            <div id="newResourceButton" class="thing resource new-button"
                 title="Add new resource">+</div>
          </div>
        </section>
        <section class="relationships">
          <h3>Relationships</h3>
          <div id="intentRelationshipsList">
            <div id="newRelationshipButton" class="relationship new-button"
                 title="Add new relationship">+</div>
          </div>
        </section>
        <section class="triggers">
          <h3>Triggers</h3>
          <div id="intentTriggersList">
            <div id="newTriggerButton" class="trigger new-button"
                 title="Add new trigger">+</div>
          </div>
        </section>
        <div class="generate-games" id="generateGames">Generate games »</div>
      </div>
      <div class="game-navigator-empty-state" id="gameNavigatorEmptyState">
        <div class="empty-state-message">
          Hi there! There aren't any games here yet because you haven't generated any.<br><br>
          Modify the design intent on the left to tell me what kind of games you want to generate,
          then hit the "Generate Games" button at the bottom!<br><br>
          Once you do that, I'm sure some games will appear.
        </div>
      </div>
      <div class="game-navigator" id="gameNavigator">
        <div class="game-navigator-topbar">
          <input class="gametitle" type="text" value="A Game about Depression">
          <button class="back" id="previousGame">« Previous game</button>
          <div class="gamecounter" id="gameCounter">1 / 6</div>
          <button class="continue" id="nextGame">Next game »</button>
        </div>
        <div class="thisgamecontainer">
          <div class="thisgame">
            <h2>Play</h2>
            <div id="game"></div>
            <div><button id="restart">Restart game</button></div>
          </div>
          <div class="thisgamerules" id="gameRulesNode">
            <h2>Generated game rules</h2>
            <div class="buttonlinks">
              <span id="viewCodeGameRules">View code</span>
            </div>
            <section class="code">
              <h3>Code</h3>
              <textarea id="gameRulesCodeNode" readonly></textarea>
            </section>
            <section class="entities">
              <h3>Entities</h3>
              <div id="generatedEntitiesList" class="things-list"></div>
            </section>
            <section class="resources">
              <h3>Resources</h3>
              <div id="generatedResourcesList" class="things-list"></div>
            </section>
            <section class="relationships">
              <h3>Relationships</h3>
              <div id="generatedRelationshipsList"></div>
            </section>
            <section class="triggers">
              <h3>Triggers</h3>
              <div id="generatedTriggersList"></div>
            </section>
          </div>
        </div>
      </div>
    </div>
    <div class="intent-navigator"></div>
  </main>
  <script src="gamepools.js"></script><!-- load static game pool data structures -->
  <script src="new.js"></script>
  <script src="generate_intent.js"></script>
  <script src="parse_game_asp.js"></script>
</body>
</html>
